# ü§ñ Telegram Bot —Å –°–∏—Å—Ç–µ–º–æ–π –ü–ª–∞—Ç–µ–∂–µ–π –∏ –ë–∞–ª–∞–Ω—Å–æ–º

[![Python](https://img.shields.io/badge/Python-3.11+-blue.svg)](https://python.org)
[![aiogram](https://img.shields.io/badge/aiogram-3.21+-green.svg)](https://aiogram.dev)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-15+-blue.svg)](https://postgresql.org)
[![Redis](https://img.shields.io/badge/Redis-7+-red.svg)](https://redis.io)
[![Docker](https://img.shields.io/badge/Docker-Compose-blue.svg)](https://docker.com)

–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π Telegram –±–æ—Ç —Å –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –ø–ª–∞—Ç–µ–∂–µ–π Heleket, –±–∞–ª–∞–Ω—Å–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –ø–æ–∫—É–ø–∫–æ–π –∑–≤–µ–∑–¥ –∏ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–º rate limiting. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö SOLID, DRY, KISS —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#Ô∏è-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
- [üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#Ô∏è-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
- [‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞](#Ô∏è-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
- [üê≥ Docker —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ](#-docker-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ)
- [üì° API –∏ –í–µ–±—Ö—É–∫–∏](#-api-–∏-–≤–µ–±—Ö—É–∫–∏)
- [üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥](#-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)
- [üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [üèóÔ∏è –î–µ—Ç–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](docs/ARCHITECTURE.md) - –ü–æ–¥—Ä–æ–±–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
- [üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ DevOps](docs/DEPLOYMENT.md) - CI/CD, Docker, –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- [üíé Fragment API](docs/fragment.md) - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Fragment –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –∑–≤–µ–∑–¥


## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```mermaid
graph TB
    subgraph "External Services"
        TG[Telegram API]
        HELEKET[Heleket Payment API]
        FRAGMENT[Telegram Fragment API]
    end

    subgraph "Load Balancer"
        NGINX[Nginx]
    end

    subgraph "Application Layer"
        BOT[Telegram Bot]
        WEBHOOK[Webhook Service]
        API[REST API]
    end

    subgraph "Business Logic"
        MH[Message Handler]
        PS[Payment Service]
        BS[Balance Service]
        SPS[Star Purchase Service]
        FS[Fragment Service]
        RL[Rate Limiter]
    end

    subgraph "Data Layer"
        UR[User Repository]
        BR[Balance Repository]
        CACHE[Cache Services]
    end

    subgraph "Infrastructure"
        PG[(PostgreSQL)]
        REDIS[(Redis Cluster)]
    end

    TG --> NGINX
    HELEKET --> NGINX
    FRAGMENT --> NGINX
    NGINX --> BOT
    NGINX --> WEBHOOK
    NGINX --> API

    BOT --> MH
    WEBHOOK --> PS
    MH --> PS
    MH --> BS
    MH --> SPS
    MH --> FS
    MH --> RL

    PS --> UR
    BS --> BR
    SPS --> UR
    SPS --> BR
    FS --> FRAGMENT
    RL --> CACHE

    UR --> PG
    BR --> PG
    CACHE --> REDIS

```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```mermaid
flowchart LR
    subgraph handlers ["üéØ Handlers Layer"]
        MH["üì® Message Handler"]
        BH["üîß Base Handler"]
        EH["‚ùå Error Handler"]
        PH["üí≥ Payment Handler"]
        PuH["üõí Purchase Handler"]
        BalH["üí∞ Balance Handler"]
    end

    subgraph services ["‚öôÔ∏è Services Layer"]
        PS["üí≥ Payment Service"]
        BS["üí∞ Balance Service"]
        SPS["‚≠ê Star Purchase Service"]
        FS["üíé Fragment Service"]
        CS["üóÑÔ∏è Cache Service"]
        RL["üö¶ Rate Limiter"]
        HS["‚ù§Ô∏è Health Service"]
        WS["üîå WebSocket Service"]
    end

    subgraph repos ["üìä Repository Layer"]
        UR["üë§ User Repository"]
        BR["üí∞ Balance Repository"]
    end

    subgraph core ["üèóÔ∏è Core Layer"]
        INT["üîó Interfaces"]
        CFG["‚öôÔ∏è Configuration"]
    end

    MH --> PS
    MH --> BS
    MH --> SPS
    MH --> FS
    PH --> PS
    PuH --> SPS
    BalH --> BS

    PS --> UR
    BS --> BR
    SPS --> UR
    SPS --> BR
    FS --> SPS

    PS --> CS
    BS --> CS
    SPS --> CS

```

**–°–ª–æ–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**

```mermaid
graph TD
    subgraph "üéØ HANDLERS LAYER"
        MH["üì® Message Handler"]
        PH["üí≥ Payment Handler"]
        PuH["üõí Purchase Handler"]
        BH["üí∞ Balance Handler"]
    end
    
    subgraph "‚öôÔ∏è SERVICES LAYER"
        PS["üí≥ Payment Service"]
        BS["üí∞ Balance Service"]
        SPS["‚≠ê Star Purchase Service"]
        FS["üíé Fragment Service"]
        RL["üö¶ Rate Limiter"]
    end
    
    subgraph "üìä REPOSITORY LAYER"
        UR["üë§ User Repository"]
        BR["üí∞ Balance Repository"]
    end
    
    subgraph "üèóÔ∏è CORE LAYER"
        INT["üîó Interface ABC"]
        CFG["‚öôÔ∏è Config Settings"]
    end
    
    %% Connections between layers
    MH --> PS
    MH --> FS
    PH --> PS
    PuH --> SPS
    BH --> BS
    
    PS --> UR
    BS --> BR
    SPS --> UR
    SPS --> BR
    FS --> SPS
    
    PS --> INT
    BS --> INT
    SPS --> INT
    FS --> INT
    RL --> INT
    
    UR --> CFG
    BR --> CFG
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### ER-–¥–∏–∞–≥—Ä–∞–º–º–∞

```mermaid
erDiagram
    USERS {
        int user_id PK "Telegram User ID"
        string username "Telegram username"
        string first_name "–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
        string last_name "–§–∞–º–∏–ª–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
        datetime created_at "–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è"
        datetime updated_at "–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è"
    }

    BALANCES {
        int id PK "–£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID"
        int user_id FK "ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
        decimal amount "–°—É–º–º–∞ –±–∞–ª–∞–Ω—Å–∞"
        string currency "–í–∞–ª—é—Ç–∞ (TON)"
        datetime created_at "–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è"
        datetime updated_at "–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è"
    }

    TRANSACTIONS {
        int id PK "–£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID"
        int user_id FK "ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
        enum transaction_type "–¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏"
        enum status "–°—Ç–∞—Ç—É—Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏"
        decimal amount "–°—É–º–º–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏"
        string currency "–í–∞–ª—é—Ç–∞"
        string description "–û–ø–∏—Å–∞–Ω–∏–µ"
        string external_id UK "–í–Ω–µ—à–Ω–∏–π ID"
        text transaction_metadata "–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ JSON"
        datetime created_at "–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è"
        datetime updated_at "–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è"
    }

    USERS ||--|| BALANCES : "–∏–º–µ–µ—Ç"
    USERS ||--o{ TRANSACTIONS : "—Å–æ–≤–µ—Ä—à–∞–µ—Ç"
```

**–î–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**

```mermaid
graph LR
    subgraph USERS ["üë§ USERS TABLE"]
        U_FIELDS["üîë user_id (PK) - INTEGER<br/>üìù username - VARCHAR<br/>üë§ first_name - VARCHAR<br/>üë§ last_name - VARCHAR<br/>üìÖ created_at - DATETIME<br/>üìÖ updated_at - DATETIME"]
    end
    
    subgraph BALANCES ["üí∞ BALANCES TABLE"]
        B_FIELDS["üîë id (PK) - INTEGER<br/>üîó user_id (FK) - INTEGER<br/>üíµ amount - DECIMAL<br/>üí± currency - VARCHAR<br/>üìÖ created_at - DATETIME<br/>üìÖ updated_at - DATETIME"]
    end
    
    subgraph TRANSACTIONS ["üìä TRANSACTIONS TABLE"]
        T_FIELDS["üîë id (PK) - INTEGER<br/>üîó user_id (FK) - INTEGER<br/>üìã transaction_type - ENUM<br/>üìä status - ENUM<br/>üíµ amount - DECIMAL<br/>üí± currency - VARCHAR<br/>üìù description - VARCHAR<br/>üîí external_id (UK) - VARCHAR<br/>üìÑ transaction_metadata - TEXT<br/>üìÖ created_at - DATETIME<br/>üìÖ updated_at - DATETIME"]
    end
    
    USERS -.->|"1:1 has balance"| BALANCES
    USERS -.->|"1:N makes transactions"| TRANSACTIONS
```

### –û–ø–∏—Å–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü

| –¢–∞–±–ª–∏—Ü–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è |
|---------|----------|---------------|
| **users** | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ Telegram | `user_id` (PK), `username`, `first_name`, `last_name` |
| **balances** | –ë–∞–ª–∞–Ω—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | `user_id` (FK), `amount`, `currency` |
| **transactions** | –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π | `user_id` (FK), `transaction_type`, `status`, `amount`, `external_id` |

### –¢–∏–ø—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

| –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----------|
| `purchase` | –ü–æ–∫—É–ø–∫–∞ –∑–≤–µ–∑–¥ |
| `refund` | –í–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤ |
| `bonus` | –ë–æ–Ω—É—Å–Ω—ã–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è |
| `adjustment` | –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ |
| `recharge` | –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ |

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|--------|------------|
| **Python** | 3.11+ | –û—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ |
| **aiogram** | 3.21+ | Telegram Bot Framework |
| **FastAPI** | 0.115+ | REST API –∏ –≤–µ–±—Ö—É–∫–∏ |
| **SQLAlchemy** | 2.0+ | ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î |
| **Alembic** | 1.13+ | –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î |
| **asyncpg** | 0.29+ | –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π PostgreSQL –¥—Ä–∞–π–≤–µ—Ä |
| **fragment-api-lib** | 1.0+ | –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram Fragment API |

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|--------|------------|
| **PostgreSQL** | 15+ | –û—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö |
| **Redis** | 7+ | –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–µ—Å—Å–∏–∏ |
| **Nginx** | latest | Reverse proxy –∏ load balancer |
| **Docker** | latest | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è |
| **Docker Compose** | latest | –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ |

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|------------|
| **Prometheus** | –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ |
| **Grafana** | –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ |
| **SSL/TLS** | –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π |
| **HMAC** | –ü–æ–¥–ø–∏—Å–∏ –≤–µ–±—Ö—É–∫–æ–≤ |

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.11+
- PostgreSQL 15+
- Redis 7+
- Docker –∏ Docker Compose (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –õ–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**

```bash
git clone <repository-url>
cd telegram-bot-payment-system
```

2. **–°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è**

```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏
venv\Scripts\activate  # Windows
```

3. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**

```bash
pip install -r requirements.txt
```

4. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è**

```bash
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª —Å –≤–∞—à–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
```

5. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**

```bash
alembic upgrade head
```

6. **–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**

```bash
python main.py
```

## üê≥ Docker —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫
git clone <repository-url>
cd telegram-bot-payment-system
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª
docker-compose up -d
```

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Docker

```mermaid
graph TB
    subgraph "Docker Network: bot-network"
        subgraph "Application Services"
            APP[app - Telegram Bot]
            WEBHOOK[webhook - Webhook Service]
        end

        subgraph "Infrastructure Services"
            PG[db - PostgreSQL]
            NGINX[nginx - Load Balancer]
        end

        subgraph "Redis Cluster"
            R1[redis-node-1:7379]
            R2[redis-node-2:7380]
            R3[redis-node-3:7381]
            RR1[redis-replica-1]
            RR2[redis-replica-2]
            RR3[redis-replica-3]
        end

        subgraph "Utilities"
            RC[redis-cluster-creator]
            RM[redis-cluster-monitor]
        end
    end

    APP --> PG
    APP --> R1
    WEBHOOK --> PG
    WEBHOOK --> R1
    NGINX --> APP
    NGINX --> WEBHOOK

    R1 -.-> RR1
    R2 -.-> RR2
    R3 -.-> RR3

```

### Docker —Å–µ—Ä–≤–∏—Å—ã

| –°–µ—Ä–≤–∏—Å | –ü–æ—Ä—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|------|----------|
| **app** | - | –û—Å–Ω–æ–≤–Ω–æ–π Telegram –±–æ—Ç |
| **webhook** | 8001 | –°–µ—Ä–≤–∏—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–µ–±—Ö—É–∫–æ–≤ |
| **db** | 5432 | PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö |
| **nginx** | 80, 443 | Reverse proxy |
| **redis-node-1** | 7379 | Redis –∫–ª–∞—Å—Ç–µ—Ä - —É–∑–µ–ª 1 |
| **redis-node-2** | 7380 | Redis –∫–ª–∞—Å—Ç–µ—Ä - —É–∑–µ–ª 2 |
| **redis-node-3** | 7381 | Redis –∫–ª–∞—Å—Ç–µ—Ä - —É–∑–µ–ª 3 |

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ Fragment cookies

–ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ `FRAGMENT_AUTO_COOKIE_REFRESH=true`:

- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Chrome –∏ ChromeDriver
- –ü—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ Fragment cookies
- –í–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è cookies –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
- –§–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç cookies —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º `FRAGMENT_COOKIE_REFRESH_INTERVAL`
- Cookies —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π Fragment API

### –†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ cookies

–î–ª—è —Ä—É—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è cookies:

```bash
# –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
python scripts/update_fragment_cookies.py

# –ò–ª–∏ —á–µ—Ä–µ–∑ docker-compose
docker-compose exec app python scripts/update_fragment_cookies.py
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è Fragment API

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è Fragment API:

```bash
# –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
python scripts/check_fragment_status.py

# –ò–ª–∏ —á–µ—Ä–µ–∑ docker-compose
docker-compose exec app python scripts/check_fragment_status.py
```

## üì° API –∏ –í–µ–±—Ö—É–∫–∏

### Webhook —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------|----------|
| `/webhook/heleket` | POST | –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π –æ—Ç Heleket |
| `/health` | GET | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞ |
| `/metrics` | GET | –ú–µ—Ç—Ä–∏–∫–∏ Prometheus |

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–µ–±—Ö—É–∫–∞ Heleket

```json
{
  "uuid": "payment_uuid_here",
  "status": "completed",
  "amount": "100.00",
  "currency": "TON",
  "external_id": "user_12345_stars_100",
  "created_at": "2024-01-01T12:00:00Z",
  "metadata": {
    "user_id": 12345,
    "stars_count": 100
  }
}
```

### –î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–ª–∞—Ç–µ–∂–µ–π

```mermaid
sequenceDiagram
    participant U as üë§ User
    participant TB as ü§ñ Telegram Bot
    participant PS as üí≥ Payment Service
    participant H as üè¶ Heleket API
    participant WH as üîó Webhook Handler
    participant DB as üóÑÔ∏è Database
    participant C as üì¶ Cache

    U->>TB: /buy_stars 100
    TB->>PS: create_payment_request(user_id, 100)
    PS->>DB: create_transaction(pending)
    PS->>H: POST /create_payment
    H-->>PS: payment_url + uuid
    PS->>C: cache_payment(uuid, user_id)
    PS-->>TB: payment_url
    TB-->>U: üí≥ –°—Å—ã–ª–∫–∞ –¥–ª—è –æ–ø–ª–∞—Ç—ã
    
    Note over U,H: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –ø–æ —Å—Å—ã–ª–∫–µ –∏ –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç
    
    H->>WH: POST /webhook/heleket (payment completed)
    WH->>C: get_payment_info(uuid)
    WH->>DB: update_transaction(completed)
    WH->>DB: update_user_balance(+100 stars)
    WH->>TB: notify_payment_success(user_id)
    TB->>U: ‚úÖ –ü–ª–∞—Ç–µ–∂ —É—Å–ø–µ—à–µ–Ω! +100 ‚≠ê
```

### –î–∏–∞–≥—Ä–∞–º–º–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

```mermaid
stateDiagram-v2
    [*] --> pending : –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
    
    pending --> processing : –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—á–∞–ª –æ–ø–ª–∞—Ç—É
    pending --> cancelled : –û—Ç–º–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
    pending --> expired : –ò—Å—Ç–µ–∫ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è
    
    processing --> completed : –£—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞
    processing --> failed : –û—à–∏–±–∫–∞ –ø–ª–∞—Ç–µ–∂–∞
    processing --> cancelled : –û—Ç–º–µ–Ω–∞ –≤–æ –≤—Ä–µ–º—è –æ–ø–ª–∞—Ç—ã
    
    completed --> refunded : –í–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤
    failed --> pending : –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞
    
    cancelled --> [*]
    expired --> [*]
    completed --> [*]
    refunded --> [*]
    
    note right of completed : –ë–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
    note right of refunded : –ë–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n—É–º–µ–Ω—å—à–∞–µ—Ç—Å—è
```

### Rate Limiting

```mermaid
graph LR
    subgraph "Rate Limiting Layers"
        UL[User Limits]
        GL[Global Limits]
        BL[Burst Limits]
        PL[Premium Limits]
    end

    subgraph "Limit Types"
        MSG[Messages: 30/min]
        OPS[Operations: 20/min]
        PAY[Payments: 5/min]
    end

    subgraph "Special Cases"
        NEW[New Users: 15/min]
        PREM[Premium: x2 limits]
        BURST[Burst: 10/10sec]
    end

    UL --> MSG
    UL --> OPS
    UL --> PAY
    
    GL --> MSG
    GL --> OPS
    GL --> PAY

```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|------------|----------------------|----------|
| **Telegram** | `TELEGRAM_TOKEN` | - | –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ |
| **Heleket** | `MERCHANT_UUID` | - | UUID –º–µ—Ä—á–∞–Ω—Ç–∞ |
| **Heleket** | `API_KEY` | - | API –∫–ª—é—á |
| **Fragment** | `FRAGMENT_SEED_PHRASE` | - | 24-—Å–ª–æ–≤–Ω–∞—è seed —Ñ—Ä–∞–∑–∞ TON –∫–æ—à–µ–ª—å–∫–∞ (‚ö†Ô∏è –°–ï–ö–†–ï–¢!) |
| **Fragment** | `FRAGMENT_COOKIES` | - | Cookies –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ Fragment |
| **Fragment** | `FRAGMENT_AUTO_COOKIE_REFRESH` | `false` | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ cookies |
| **Fragment** | `FRAGMENT_COOKIE_REFRESH_INTERVAL` | `3600` | –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è cookies (—Å–µ–∫) |
| **Database** | `DATABASE_URL` | `postgresql+asyncpg://...` | URL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö |
| **Redis** | `REDIS_URL` | `redis://localhost:7379` | URL Redis |

### Rate Limiting –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|----------|
| `RATE_LIMIT_USER_MESSAGES` | 30 | –°–æ–æ–±—â–µ–Ω–∏–π –≤ –º–∏–Ω—É—Ç—É –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `RATE_LIMIT_USER_OPERATIONS` | 20 | –û–ø–µ—Ä–∞—Ü–∏–π –≤ –º–∏–Ω—É—Ç—É –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `RATE_LIMIT_USER_PAYMENTS` | 5 | –ü–ª–∞—Ç–µ–∂–µ–π –≤ –º–∏–Ω—É—Ç—É –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `RATE_LIMIT_GLOBAL_MESSAGES` | 1000 | –ì–ª–æ–±–∞–ª—å–Ω—ã–π –ª–∏–º–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–π |
| `RATE_LIMIT_PREMIUM_MULTIPLIER` | 2.0 | –ú–Ω–æ–∂–∏—Ç–µ–ª—å –¥–ª—è –ø—Ä–µ–º–∏—É–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |

### Cache –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | TTL (—Å–µ–∫) | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----------|----------|
| `CACHE_TTL_USER` | 1800 | –ö–µ—à –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| `CACHE_TTL_SESSION` | 1800 | –ö–µ—à —Å–µ—Å—Å–∏–π |
| `CACHE_TTL_PAYMENT` | 900 | –ö–µ—à –ø–ª–∞—Ç–µ–∂–µ–π |
| `CACHE_TTL_RATE_LIMIT` | 60 | –ö–µ—à rate limiting |

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ú–µ—Ç—Ä–∏–∫–∏ Prometheus

- **–°—á–µ—Ç—á–∏–∫–∏**: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π, –ø–ª–∞—Ç–µ–∂–µ–π, –æ—à–∏–±–æ–∫
- **–ì–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã**: –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API, –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π
- **Gauge**: –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, —Ä–∞–∑–º–µ—Ä –∫–µ—à–∞
- **Rate Limiting**: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### Health Checks

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
curl http://localhost:8001/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫
curl http://localhost:8001/metrics
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

- **–£—Ä–æ–≤–Ω–∏**: DEBUG, INFO, WARNING, ERROR, CRITICAL
- **–§–æ—Ä–º–∞—Ç**: JSON –¥–ª—è production, —Ç–µ–∫—Å—Ç –¥–ª—è development
- **–†–æ—Ç–∞—Ü–∏—è**: –ø–æ —Ä–∞–∑–º–µ—Ä—É –∏ –≤—Ä–µ–º–µ–Ω–∏
- **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è**: —á–µ—Ä–µ–∑ Docker logging driver

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
pytest

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest --cov=.

# –¢–æ–ª—å–∫–æ unit —Ç–µ—Å—Ç—ã
pytest tests/unit/

# –¢–æ–ª—å–∫–æ integration —Ç–µ—Å—Ç—ã
pytest tests/integration/

# –¢–µ—Å—Ç—ã Fragment API
pytest tests/test_fragment_service.py
pytest tests/test_star_purchase_fragment.py
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```mermaid
graph TD
    subgraph "üß™ Test Structure"
        TESTS["üìÅ tests/"]
        
        subgraph "üî¨ Unit Tests"
            UNIT[("üìÅ unit/")]
            UNIT_SERVICES["üìÅ test_services/"]
            UNIT_REPOS[("üìÅ test_repositories/")]
            UNIT_HANDLERS[("üìÅ test_handlers/")]
        end
        
        subgraph "üîó Integration Tests"
            INTEGRATION[("üìÅ integration/")]
            INT_PAYMENT[("üìÅ test_payment_flow/")]
            INT_WEBHOOK[("üìÅ test_webhook_processing/")]
            INT_FRAGMENT[("üìÅ test_fragment_integration/")]
        end
        
        subgraph "üõ†Ô∏è Test Fixtures"
            FIXTURES[("üìÅ fixtures/")]
            FIX_DB["üìÑ database.py"]
            FIX_REDIS["üìÑ redis.py"]
        end
    end
    
    TESTS --> UNIT
    TESTS --> INTEGRATION
    TESTS --> FIXTURES
    
    UNIT --> UNIT_SERVICES
    UNIT --> UNIT_REPOS
    UNIT --> UNIT_HANDLERS
    
    INTEGRATION --> INT_PAYMENT
    INTEGRATION --> INT_WEBHOOK
    INTEGRATION --> INT_FRAGMENT
    
    FIXTURES --> FIX_DB
    FIXTURES --> FIX_REDIS
```

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å**: –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ I/O –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ
- **Connection Pooling**: –ø—É–ª—ã —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –¥–ª—è –ë–î –∏ Redis
- **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Rate Limiting**: –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏
- **Circuit Breaker**: —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ —Å–±–æ—è–º

### –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

- **–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ**: –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –±–æ—Ç–∞
- **Redis Cluster**: —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Database Sharding**: —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- **Load Balancing**: —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏

### üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ **MD5 –ø–æ–¥–ø–∏—Å–∏** –¥–ª—è –≤–µ–±—Ö—É–∫–æ–≤
- ‚úÖ **SSL/TLS** —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ **Rate Limiting** –∑–∞—â–∏—Ç–∞ –æ—Ç DDoS
- ‚úÖ **Input Validation** –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **SQL Injection** –∑–∞—â–∏—Ç–∞ —á–µ—Ä–µ–∑ ORM
- ‚úÖ **Environment Variables** –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤
- ‚úÖ **Seed Phrase Protection** —Ö—Ä–∞–Ω–µ–Ω–∏–µ seed —Ñ—Ä–∞–∑—ã –≤ –∑–∞—â–∏—â–µ–Ω–Ω–æ–º –≤–∏–¥–µ
- ‚úÖ **Cookie Management** –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ cookies Fragment
- ‚úÖ **Pre-flight Checks** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –¥–ª—è –ë–î –∏ Redis
2. –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
3. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –¥–ª—è –≤—Å–µ—Ö –≤–Ω–µ—à–Ω–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ firewall –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞
6. –•—Ä–∞–Ω–∏—Ç–µ seed —Ñ—Ä–∞–∑—É TON –∫–æ—à–µ–ª—å–∫–∞ –≤ –∑–∞—â–∏—â–µ–Ω–Ω–æ–º –º–µ—Å—Ç–µ
7. –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ cookies Fragment API
8. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º: `python scripts/precheck_fragment.py`

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –°–º. —Ñ–∞–π–ª `LICENSE` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. Fork –ø—Ä–æ–µ–∫—Ç–∞
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add some AmazingFeature'`)
4. Push –≤ branch (`git push origin feature/AmazingFeature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ [Issues](../../issues) –Ω–∞ GitHub
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Issue —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º
3. –ü—Ä–∏–ª–æ–∂–∏—Ç–µ –ª–æ–≥–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (–±–µ–∑ —Å–µ–∫—Ä–µ—Ç–æ–≤!)

---

**–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è Telegram Bot —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤**
